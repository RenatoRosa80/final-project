{% extends "pedidos/base_pedidos.html" %}
{% block title %}Meus Pedidos{% endblock %}

{% block content %}

<h2 class="mb-4">Meus Pedidos</h2>

{% if pedidos %}
    <div class="list-group">
        {% for pedido in pedidos %}
        <div class="list-group-item mb-3 shadow-sm">

            <h5 class="mb-1">
                Pedido #{{ pedido.id }} — Mesa {{ pedido.mesa.numero }}
            </h5>

            <p class="mb-1">
                <strong>Status:</strong> {{ pedido.get_status_display }}
            </p>

            <p class="mb-1">
                <strong>Total:</strong> R$ {{ pedido.valor_total }}
            </p>

            <p class="text-muted small">
                Aberto em: {{ pedido.data_abertura|date:"d/m/Y H:i" }}
            </p>

            {% if pedido.data_fechamento %}
            <p class="text-muted small">
                Fechado em: {{ pedido.data_fechamento|date:"d/m/Y H:i" }}
            </p>
            {% endif %}

            <a href="{% url 'pedidos:detalhes_pedido' pedido.id %}" 
               class="btn btn-primary btn-sm">
               Ver detalhes
            </a>

        </div>
        {% endfor %}
    </div>

{% else %}
    <p class="text-muted">Você ainda não fez nenhum pedido.</p>
{% endif %}

<a href="{% url 'pedidos:cardapio_publico' %}" class="btn btn-secondary mt-3">
    Voltar ao Cardápio
</a>

{% endblock %}
